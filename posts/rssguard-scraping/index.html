<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>RSSGuard without RSS: scraping with CSS selectors - Over to you</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta itemprop=name content="RSSGuard without RSS: scraping with CSS selectors"><meta itemprop=description content="Despite the modern internet’s tendency to centralise towards a small number of big content gateways (Reddit, Twitter, Hacker News etc), I still like the feeling of independence and self-directed deliberateness that comes with RSS. Rather than just stepping into the firehose of what the latest &#34;Big Tech&#34; recommender systems want to show me, it’s me deciding who I want to hear more from.
These days I use RSSGuard, a very simple and lightweight reader for RSS/ATOM/JSON feeds."><meta itemprop=datePublished content="2024-08-12T04:41:18+01:00"><meta itemprop=dateModified content="2024-08-12T04:41:18+01:00"><meta itemprop=wordCount content="458"><meta itemprop=keywords content="tech,programming,"><meta property="og:title" content="RSSGuard without RSS: scraping with CSS selectors"><meta property="og:description" content="Despite the modern internet’s tendency to centralise towards a small number of big content gateways (Reddit, Twitter, Hacker News etc), I still like the feeling of independence and self-directed deliberateness that comes with RSS. Rather than just stepping into the firehose of what the latest &#34;Big Tech&#34; recommender systems want to show me, it’s me deciding who I want to hear more from.
These days I use RSSGuard, a very simple and lightweight reader for RSS/ATOM/JSON feeds."><meta property="og:type" content="article"><meta property="og:url" content="https://overto.eu/posts/rssguard-scraping/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-08-12T04:41:18+01:00"><meta property="article:modified_time" content="2024-08-12T04:41:18+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="RSSGuard without RSS: scraping with CSS selectors"><meta name=twitter:description content="Despite the modern internet’s tendency to centralise towards a small number of big content gateways (Reddit, Twitter, Hacker News etc), I still like the feeling of independence and self-directed deliberateness that comes with RSS. Rather than just stepping into the firehose of what the latest &#34;Big Tech&#34; recommender systems want to show me, it’s me deciding who I want to hear more from.
These days I use RSSGuard, a very simple and lightweight reader for RSS/ATOM/JSON feeds."><link rel=stylesheet type=text/css media=screen href=https://overto.eu/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://overto.eu/css/main.css><link id=dark-scheme rel=stylesheet type=text/css href=https://overto.eu/css/dark.css><script src=https://overto.eu/js/main.js></script></head><body><div class="container wrapper"><div class=header><h1 class=site-title><a href=https://overto.eu/>Over to you</a></h1><div class=site-description><nav class="nav social"><ul class=flat><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/pages/about-me>About me</a></li><li><a href=/pages/learning>Learning</a></li><li><a href=/pages/languages>Programming languages</a></li><li><a href=/pages/software>Software</a></li><li><a href=/pages/startups>Startups</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>12</span>
<span class=rest>Aug 2024</span></div></div><div class=matter><h1 class=title>RSSGuard without RSS: scraping with CSS selectors</h1></div></div><div class=paragraph><p>Despite the modern internet’s tendency to centralise towards a small number of big content gateways (Reddit, Twitter, Hacker News etc), I still like the feeling of independence and self-directed deliberateness that comes with <a href=https://en.wikipedia.org/wiki/RSS>RSS</a>. Rather than just stepping into the firehose of what the latest "Big Tech" recommender systems want to show me, it’s <em>me</em> deciding who <em>I</em> want to hear more from.</p></div><div class=paragraph><p>These days I use <a href=https://github.com/martinrotter/rssguard>RSSGuard</a>, a very simple and lightweight reader for RSS/ATOM/JSON feeds.</p></div><div class=paragraph><p>However, many interesting sites do not provide any kind of syndication feed. There is an online service called <a href=https://rsseverything.com>RSS Everything</a> that will accept a website URL and some filters (to narrow down the section of the page you’re interested in watching for changes), and gives you an RSS feed URL that presents the data periodically scraped from that page. The filters seem to be based on a stripped-down regex, though, which is <a href=https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454>not sufficient for parsing HTML</a>.</p></div><div class=paragraph><p>There are probably other sites and self-hosted tools that can do this, but I found a nice way that works with RSS Guard. After reading the <a href=https://github.com/martinrotter/rssguard/blob/master/docs/source/features/scraping.md>docs</a>, I was pointed to a handy little Python utility called <a href=https://github.com/Owyn/CSS2RSS>CSS2RSS</a>. This takes HTML source via standard input and a CSS selector for the relevant part of the page, then writes a <a href=https://www.jsonfeed.org>JSON Feed</a> to standard output, which can then be consumed by RSS Guard.</p></div><div class=paragraph><p>My first use-case for this was to track new <a href=https://wiibrew.org/wiki/WiiBrew:Homebrew_releases>Wii homebrew releases</a>. They actually had an RSS feed using "feed43", a service which apparently performed a similar task but was shut down.</p></div><div class=paragraph><p>That website runs on MediaWiki and doesn’t provide a nice easy CSS selector like <code>#releases</code>, since the HTML is generated from Markdown. The heading for the section of interest does have a <code>#Releases</code> id, but that’s wrapped up in a div which <em>precedes</em> the list items I want, rather than wrapping them:</p></div><div class=paragraph><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#ff79c6>h2</span>&gt;&lt;<span style=color:#ff79c6>span</span> <span style=color:#50fa7b>class</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;mw-headline&#34;</span> <span style=color:#50fa7b>id</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;Releases&#34;</span>&gt;Releases&lt;/<span style=color:#ff79c6>span</span>&gt;&lt;/<span style=color:#ff79c6>h2</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#ff79c6>ul</span>&gt;&lt;<span style=color:#ff79c6>li</span>&gt;&lt;<span style=color:#ff79c6>b</span>&gt;7 August 24:&lt;/<span style=color:#ff79c6>b</span>&gt; &lt;<span style=color:#ff79c6>a</span> <span style=color:#50fa7b>href</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/wiki/Wii-Tac-Toe&#34;</span> <span style=color:#50fa7b>title</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;Wii-Tac-Toe&#34;</span>&gt;Wii-Tac-Toe&lt;/<span style=color:#ff79c6>a</span>&gt; 1.1.0 released by &lt;<span style=color:#ff79c6>a</span> <span style=color:#50fa7b>href</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/wiki/User:Crayon&#34;</span> <span style=color:#50fa7b>title</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;User:Crayon&#34;</span>&gt;Crayon&lt;/<span style=color:#ff79c6>a</span>&gt;&lt;/<span style=color:#ff79c6>li</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#ff79c6>li</span>&gt;&lt;<span style=color:#ff79c6>b</span>&gt;31 July 24:&lt;/<span style=color:#ff79c6>b</span>&gt; &lt;<span style=color:#ff79c6>a</span> <span style=color:#50fa7b>href</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/wiki/Seta_GX&#34;</span> <span style=color:#50fa7b>title</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;Seta GX&#34;</span>&gt;Seta GX&lt;/<span style=color:#ff79c6>a</span>&gt; beta 0.2 released by Evoca&lt;/<span style=color:#ff79c6>li</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#ff79c6>li</span>&gt;&lt;<span style=color:#ff79c6>b</span>&gt;26 Jul 24:&lt;/<span style=color:#ff79c6>b</span>&gt; &lt;<span style=color:#ff79c6>a</span> <span style=color:#50fa7b>href</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/wiki/Newo_Bit&#34;</span> <span style=color:#50fa7b>title</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;Newo Bit&#34;</span>&gt;Newo Bit&lt;/<span style=color:#ff79c6>a</span>&gt; 1.0 released by Owen&lt;/<span style=color:#ff79c6>li</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#ff79c6>li</span>&gt;&lt;<span style=color:#ff79c6>b</span>&gt;7 Jul 24:&lt;/<span style=color:#ff79c6>b</span>&gt; &lt;<span style=color:#ff79c6>a</span> <span style=color:#50fa7b>href</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/wiki/Mame4wii&#34;</span> <span style=color:#50fa7b>title</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;Mame4wii&#34;</span>&gt;mame4wii&lt;/<span style=color:#ff79c6>a</span>&gt; 1.35.3 released by Nebiun&lt;/<span style=color:#ff79c6>li</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#ff79c6>li</span>&gt;&lt;<span style=color:#ff79c6>b</span>&gt;24 March 24:&lt;/<span style=color:#ff79c6>b</span>&gt; &lt;<span style=color:#ff79c6>a</span> <span style=color:#50fa7b>href</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/wiki/Shark&#34;</span> <span style=color:#50fa7b>title</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;Shark&#34;</span>&gt;Shark&lt;/<span style=color:#ff79c6>a</span>&gt; 1.1 released by Nebiun&lt;/<span style=color:#ff79c6>li</span>&gt;&lt;/<span style=color:#ff79c6>ul</span>&gt;</span></span></code></pre></div></div><div class=paragraph><p>After some experimentation, I learned some new CSS selector operators, and was able to extract what I needed with this expression:</p></div><div class=paragraph><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>document</span>.querySelectorAll(<span style=color:#f1fa8c>&#39;h2:has(#Releases) + ul li&#39;</span>)</span></span></code></pre></div></div><div class=paragraph><p>This returns the 5 list items of interest, and is understood by the <a href=https://pypi.org/project/beautifulsoup4>BeautifulSoup</a> library used by CSS2RSS. All I had to do was make a script <code>wiibrew.sh</code> containing the following:</p></div><div class=paragraph><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ff79c6>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#ff79c6></span><span style=color:#8be9fd;font-style:italic>set</span> -euo pipefail
</span></span><span style=display:flex><span>curl -s <span style=color:#f1fa8c>&#39;https://wiibrew.org/wiki/WiiBrew:Homebrew_releases&#39;</span> | python3 ~/bin/rss-scrape/css2rss.py <span style=color:#f1fa8c>&#39;h2:has(#Releases) + ul li&#39;</span></span></span></code></pre></div></div><div class=paragraph><p>All that remains is to add a new feed with the source type "Script" in RSS Guard:</p></div><div class=imageblock><div class=content><img src=https://res.cloudinary.com/destynova/image/upload/v1723436193/overto.eu/rssguard-script-css2rss_gbmffk.png alt="Screenshot of the feed setup in RSS Guard"></div></div><hr class=footer-separator><div class=tags><ul class=flat><li class=tag-li><a href=/tags/tech>tech</a></li><li class=tag-li><a href=/tags/programming>programming</a></li></ul></div><div class=back><a href=https://overto.eu/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div></div><section class=section><script src=https://utteranc.es/client.js repo=DestyNova/overto.eu issue-term=pathname label=comment theme=gruvbox-dark crossorigin=anonymous async></script></section><div class="footer wrapper"><nav class=nav><div>2024</div></nav></div></body></html>