<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Living with dwm - Over to you</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta itemprop=name content="Living with dwm"><meta itemprop=description content="You may have heard of tiling window managers like dwm or i3. These are pretty interesting from a nerdy elitist hacker perspective (&#34;I know Unix!&#34;), but can also look quite nice and make good use of on-screen space. I switched to dwm yesterday and enjoyed spending some time to figure out the absolute basics. On my old, small laptop though, I realised that it suits me best to just have a separate tag per application."><meta itemprop=datePublished content="2020-04-04T17:19:11+01:00"><meta itemprop=dateModified content="2020-04-04T17:19:11+01:00"><meta itemprop=wordCount content="934"><meta itemprop=keywords content="tech,"><meta property="og:title" content="Living with dwm"><meta property="og:description" content="You may have heard of tiling window managers like dwm or i3. These are pretty interesting from a nerdy elitist hacker perspective (&#34;I know Unix!&#34;), but can also look quite nice and make good use of on-screen space. I switched to dwm yesterday and enjoyed spending some time to figure out the absolute basics. On my old, small laptop though, I realised that it suits me best to just have a separate tag per application."><meta property="og:type" content="article"><meta property="og:url" content="https://overto.eu/posts/dwm-extras/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-04-04T17:19:11+01:00"><meta property="article:modified_time" content="2020-04-04T17:19:11+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Living with dwm"><meta name=twitter:description content="You may have heard of tiling window managers like dwm or i3. These are pretty interesting from a nerdy elitist hacker perspective (&#34;I know Unix!&#34;), but can also look quite nice and make good use of on-screen space. I switched to dwm yesterday and enjoyed spending some time to figure out the absolute basics. On my old, small laptop though, I realised that it suits me best to just have a separate tag per application."><link rel=stylesheet type=text/css media=screen href=https://overto.eu/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://overto.eu/css/main.css><link id=dark-scheme rel=stylesheet type=text/css href=https://overto.eu/css/dark.css><script src=https://overto.eu/js/main.js></script></head><body><div class="container wrapper"><div class=header><h1 class=site-title><a href=https://overto.eu/>Over to you</a></h1><div class=site-description><nav class="nav social"><ul class=flat><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/pages/about-me>About me</a></li><li><a href=/pages/learning>Learning</a></li><li><a href=/pages/languages>Programming languages</a></li><li><a href=/pages/software>Software</a></li><li><a href=/pages/startups>Startups</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>04</span>
<span class=rest>Apr 2020</span></div></div><div class=matter><h1 class=title>Living with dwm</h1></div></div><div class=paragraph><p>You may have heard of tiling window managers like <a href=https://dwm.suckless.org>dwm</a> or <a href=https://i3wm.org/>i3</a>. These are pretty interesting from a nerdy elitist hacker perspective ("I know Unix!"), but can also look quite nice and make good use of on-screen space. I switched to dwm yesterday and enjoyed spending some time to figure out the absolute basics. On my old, small laptop though, I realised that it suits me best to just have a separate tag per application. Tags are like workspaces, but more flexible; in my case though it‚Äôs just a separate desktop for each app.</p></div><div class=sect1><h2 id=_whats_missing>What‚Äôs missing?</h2><div class=sectionbody><div class=paragraph><p>Lots of things are missing that you normally take for granted in a full desktop environment like Gnome or KDE. Here are some of the things I‚Äôve noticed so far:</p></div><div class=ulist><ul><li><p>Keyboard mapping is unset (defaults to <code>en_US</code>).</p></li><li><p>No keyboard hotkeys for e.g. changing volume.</p></li><li><p>System status bar only tells you about the window manager. You don‚Äôt even get a clock!</p></li><li><p><code>notify-send</code> popups are ugly.</p></li><li><p>No screensaver / lock.</p></li></ul></div><div class=paragraph><p>There‚Äôs probably a bunch of other things I haven‚Äôt even noticed yet. So if you want to live with a minimalist window manager, you have two choices:</p></div><div class="olist arabic"><ol class=arabic><li><p>just live without these things and do everything from the command line (you can launch one with <code>Alt+Shift+Enter</code>, or in my case <code>Super+Shift+Enter</code> since <code>Alt</code> was conflicting with shortcuts in Firefox)‚Ä¶‚Äã or</p></li><li><p>find and configure (or write your own) external tools to replace the missing parts.</p></li></ol></div></div></div><div class=sect1><h2 id=_adding_what_you_need>Adding what you need</h2><div class=sectionbody><div class=paragraph><p>Let‚Äôs take a look at my <code>~/.xsessionrc</code> file which should run a bunch of programs when I next start dwm. (I say should because I haven‚Äôt logged out and back in yet.)</p></div><div class=paragraph><p><em>.xsessionrc</em><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>setxkbmap ie
</span></span><span style=display:flex><span>dunst &amp; <span style=color:#8be9fd;font-style:italic>disown</span>
</span></span><span style=display:flex><span>xautolock -time <span style=color:#bd93f9>10</span> -locker <span style=color:#f1fa8c>&#34;xset dpms force off &amp;&amp; slock&#34;</span> <span style=color:#ff79c6>&amp;&amp;</span> <span style=color:#8be9fd;font-style:italic>disown</span>
</span></span><span style=display:flex><span>~/bin/scripts/dwm_status &amp; <span style=color:#8be9fd;font-style:italic>disown</span>
</span></span><span style=display:flex><span>xbindkeys -f /home/omf/.xbindkeysrc</span></span></code></pre></div></p></div><div class=paragraph><p>The first command is straightforward‚Äâ‚Äî‚Äâit just tells X to use the "English (Ireland)" layout for the keyboard. No problem.</p></div><div class=paragraph><p>Next, we use <a href=https://dunst-project.org/>Dunst</a> as the system notifier, so that messages displayed with <code>notify-send</code> can be formatted and have arbitrary timeouts. Note the use of <code>command & disown</code> to launch programs as daemons that stay the background.</p></div><div class=paragraph><p>We then use <code>xautolock</code> and the extremely barebones <a href=https://tools.suckless.org/slock/>slock</a> to lock the screen after 10 minutes of inactivity. I also want the screen to turn off when locking, so <code>xset dpms force off</code> does that until we move the mouse or hit a key.</p></div><div class=paragraph><p>Then, we run a script called <code>dwm_status</code> to periodically update the dwm status bar at the top of the screen. Updating the status bar is done by calling <code>xsetroot -name "(new text)"</code>. Let‚Äôs have a look at the <code>dwm_status</code> script.</p></div><div class=paragraph><p><em>dwm_status</em><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff79c6>while</span> true; <span style=color:#ff79c6>do</span>
</span></span><span style=display:flex><span>  ~/bin/scripts/dwm_status_update
</span></span><span style=display:flex><span>  sleep <span style=color:#bd93f9>30</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>done</span></span></span></code></pre></div></p></div><div class=paragraph><p>We can see that it just sleeps in a loop, calling <code>dwm_status_update</code> once every 30 seconds. Okay, what‚Äôs in that file?</p></div><div class=paragraph><p><em>scripts/dwm_status_update</em><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>DATE</span><span style=color:#ff79c6>=</span><span style=color:#ff79c6>$(</span>date +<span style=color:#f1fa8c>&#34;%F %H:%M&#34;</span><span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>VOLUME</span><span style=color:#ff79c6>=</span><span style=color:#ff79c6>$(</span>pactl list sinks | grep <span style=color:#f1fa8c>&#39;Volume: front-left&#39;</span> | awk <span style=color:#f1fa8c>&#39;{print $5}&#39;</span><span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>xsetroot -name <span style=color:#f1fa8c>&#34;‚è∞ </span><span style=color:#8be9fd;font-style:italic>$DATE</span><span style=color:#f1fa8c> | üîä </span><span style=color:#8be9fd;font-style:italic>$VOLUME</span><span style=color:#f1fa8c>&#34;</span></span></span></code></pre></div></p></div><div class=paragraph><p>Okay, now we have something. So our status bar so far just has the date/time and system volume. We used <code>pactl</code> and some ugly grep/awk to get what we needed. It‚Äôs a shame there‚Äôs no machine-readable output from <code>pactl</code>. You set the volume by calling <code>set-sink-volume</code> but there‚Äôs no <code>get-sink-volume</code> which would have been handy.</p></div><div class=paragraph><p>You might ask why this is split into two scripts. That‚Äôs because I want to be able to do things that immediately update the status bar without waiting 30 seconds. The last action in <code>.xsessionrc</code>, calling <code>xbindkeys</code>, gives an example of that.</p></div><div class=paragraph><p><em>.xbindkeysrc</em><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f1fa8c>&#34;~/bin/scripts/vol_up&#34;</span>
</span></span><span style=display:flex><span>Mod4 + KP_Add
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f1fa8c>&#34;~/bin/scripts/vol_down&#34;</span>
</span></span><span style=display:flex><span>Mod4 + KP_Subtract</span></span></code></pre></div></p></div><div class=paragraph><p>Note that <code>Mod4</code> means <code>Super</code>, otherwise known as "Windows key". So <code>Super+Numkey_PLUS/MINUS</code> raise or lower the volume by a small increment. Let‚Äôs look at one of those scripts.</p></div><div class=paragraph><p><em>scripts/vol_up</em><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>SINK</span><span style=color:#ff79c6>=</span><span style=color:#ff79c6>$(</span>pactl list sinks short | grep RUNNING | awk <span style=color:#f1fa8c>&#39;{ print $2 }&#39;</span><span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pactl set-sink-volume <span style=color:#8be9fd;font-style:italic>$SINK</span> +5%
</span></span><span style=display:flex><span>~/bin/scripts/dwm_status_update</span></span></code></pre></div></p></div><div class=paragraph><p>This sets the volume up by 5% then calls the status bar update script. Note that you can get the desired sink name with <code>pactl list sinks | grep Name:</code>.</p></div></div></div><div class=sect1><h2 id=_thoughts>Thoughts</h2><div class=sectionbody><div class=paragraph><p>So far it‚Äôs been a fun journey, and it certainly seems to yield a noticeable performance improvement on this fairly old laptop. There are a few limitations that I‚Äôm still not super happy with, like the fact that you can only run one instance of <code>xautolock</code>, so you can‚Äôt have e.g. the screen switching off (with DPMS) after 2 minutes idle, but locking after 10 minutes. They have to both happen in the same single step.</p></div><div class=paragraph><p>On the other hand, dwm includes the fantastic <code>dmenu</code> which functions as an application launcher, but can also be used in interactive scripts to do cool things. More on that in future maybe.</p></div><div class=paragraph><p>I‚Äôm not sure if I‚Äôll stick with this minimalist setup, but it‚Äôs certainly doable and you‚Äôll undoubtedly learn from the process.</p></div></div></div><div class=sect1><h2 id=_update_2020_04_19>Update 2020-04-19</h2><div class=sectionbody><div class=paragraph><p>Some other things I‚Äôve taken for granted with full desktop environments that don‚Äôt come out of the box with dwm:</p></div><div class=ulist><ul><li><p>Screenshots.</p></li><li><p>More intelligent control of backlight via DPMS (i.e. don‚Äôt turn it off when I‚Äôm playing a video, and if the display wakes while locked, but I don‚Äôt unlock it, then it should sleep the display again after a few seconds).</p></li><li><p>Floating dialog boxes that look good.</p></li><li><p>Widgets for e.g. Bluetooth and wifi configuration.</p></li><li><p>Hitting a hotkey (<code>Super</code> in Gnome) to see all windows in a zoomed-out view, without generating mouse events in them.</p></li></ul></div><div class=paragraph><p>All of these are things you can probably replace with alternative tools (or write your own) without a huge effort, but it‚Äôs easy to forget how useful they are until you don‚Äôt have them.</p></div></div></div><hr class=footer-separator><div class=tags><ul class=flat><li class=tag-li><a href=/tags/tech>tech</a></li></ul></div><div class=back><a href=https://overto.eu/><span aria-hidden=true>‚Üê Back</span></a></div><div class=back></div></div></div><section class=section><script src=https://utteranc.es/client.js repo=DestyNova/overto.eu issue-term=pathname label=comment theme=gruvbox-dark crossorigin=anonymous async></script></section><div class="footer wrapper"><nav class=nav><div>2020</div></nav></div></body></html>